# 1.0 Onboarding: The Foggy Dock

| Attribute | Value |
| :--- | :--- |
| **Version** | 1.0 |
| **Status** | Draft |
| **Date** | 2025-12-04 |
| **Author** | Mind-Angler Committee |
| **Related** | `spec/15-data-model/30-json-schemas.md` |

## 1. ê¸°íš ì˜ë„ (Design Intent)

> **ğŸ£ Planner Flow:**
> "ì‚¬ìš©ìì˜ ì²« ì§„ì…ì€ 'ìˆ™ì œ'ê°€ ì•„ë‹ˆë¼ 'ë°œê²¬'ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ì „í†µì ì¸ íšŒì›ê°€ì… í¼(Form)ì„ ì œê±°í•˜ê³ , ë‚šì‹œë¼ëŠ” í–‰ìœ„ë¥¼ í†µí•´ ìì‹ ì˜ ì •ì²´ì„±ì„ ê±´ì ¸ ì˜¬ë¦¬ëŠ” ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤."

*   **No Forms, Just Play:** í…ìŠ¤íŠ¸ í•„ë“œì™€ ì•½ê´€ ë™ì˜ ë²„íŠ¼ìœ¼ë¡œ ë„ë°°ëœ í™”ë©´ ëŒ€ì‹ , ë‚šì‹œ ê²Œì„ ë©”íƒ€í¬ë¥¼ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.
*   **Immersion First:** ì•± ì‹¤í–‰ ì¦‰ì‹œ ì‹œê°/ì²­ê°ì  ìš”ì†Œë¥¼ í†µí•´ 'ì¹˜ë£Œì  ê³µê°„(Safe Space)'ì— ì§„ì…í–ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.
*   **Assessment as Gameplay:** ì‹¬ë¦¬ ê²€ì‚¬(Mood Tracking)ë¥¼ 'ë‚ ì”¨ ì¡°ì ˆ'ì´ë¼ëŠ” ê²Œì„ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì¹˜í™˜í•˜ì—¬ ê±°ë¶€ê°ì„ ë‚®ì¶”ê³  ëª°ì…ê°ì„ ë†’ì…ë‹ˆë‹¤.

## 2. ì‹œí€€ìŠ¤ ìƒì„¸ íë¦„ (User Flow)

### Scene 0: ì´ˆê¸° ìƒíƒœ (The Void)
*   **Visual:** ììš±í•œ ì•ˆê°œ, í¬ë¯¸í•œ ì„ ì°©ì¥ ë“±ë¶ˆ, ì–´ë‘ìš´ ë°”ë‹¤. UI ë²„íŠ¼ ì—†ìŒ.
*   **Audio:** ì”ì”í•œ íŒŒë„ ì†Œë¦¬, ë©€ë¦¬ì„œ ë“¤ë¦¬ëŠ” ë±ƒê³ ë™ (White Noise).
*   **Interaction:** í™”ë©´ ì¤‘ì•™ì— ë‚šì‹¯ëŒ€ê°€ ë†“ì—¬ ìˆìŒ.
*   **Prompt:** "ì•ˆê°œë¥¼ ê±·ì–´ë‚´ë ¤ë©´ ë‚šì‹¯ëŒ€ë¥¼ **ì•„ë˜ë¡œ** ë‹¹ê¸°ì„¸ìš”." (Fade-in/out text)
*   **Visual Cue:** í…ìŠ¤íŠ¸ ì•„ë˜ì— ì•„ë˜ìª½ í™”ì‚´í‘œ(â¬‡ï¸) ì• ë‹ˆë©”ì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ ë“œë˜ê·¸ ë°©í–¥ì„ ëª…í™•íˆ ì§€ì‹œí•¨.

### Scene 1: ì •ì²´ì„± í™•ì¸ (Identity)
*   **Action:** ì‚¬ìš©ìê°€ í™”ë©´ì„ ì•„ë˜ë¡œ ë‹¹ê²¨(Swipe Down) ë‚šì‹¯ì¤„ì„ ë˜ì§.
*   **Event:** ë‚šì‹¯ì¤„ì´ íŒ½íŒ½í•´ì§€ê³ , ë¬¼ ë°–ìœ¼ë¡œ 'ë‚¡ì€ ëª…ì°°' ì•„ì´í…œì´ ì˜¬ë¼ì˜´.
    > **ğŸ§  Dr. Neuro:** "ë¶ˆí™•ì‹¤í•œ ë³´ìƒ(Variable Ratio Reinforcement)ì˜ ì²« ë‹¨ê³„ì…ë‹ˆë‹¤. ë‹¹ê¸°ëŠ” í–‰ìœ„ì— ëŒ€í•œ ì¦‰ê°ì ì¸ ì‹œê°/ì´‰ê° í”¼ë“œë°±ì´ ë„íŒŒë¯¼ì„ ìê·¹í•©ë‹ˆë‹¤."
*   **UI Overlay:** ëª…ì°° ì´ë¯¸ì§€ ìœ„ì— í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì˜¤ë²„ë ˆì´ ë¨.
*   **Question:** "ê¸€ì”¨ê°€ ë¬¼ì— ë²ˆì ¸ íë¦¿í•˜ë„¤ìš”. ë­ë¼ê³  ì í˜€ ìˆì—ˆë‚˜ìš”?"
*   **Input:** ì‚¬ìš©ì ë‹‰ë„¤ì„ ì…ë ¥ -> ì—”í„° -> ëª…ì°°ì´ ê¹¨ë—í•´ì§€ë©° ì¸ë²¤í† ë¦¬ë¡œ ìˆ˜ë‚©.

### Scene 2: ë‚ ì”¨ ì¡°ìœ¨ (Baseline Assessment)
*   **Transition:** ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ì•ˆê°œê°€ 50% ê±·íˆê³ , í•˜ëŠ˜ê³¼ ìˆ˜í‰ì„ ì´ ë“œëŸ¬ë‚¨.
*   **Metaphor (SAM Scale ë³€í˜•):**
    *   **íŒŒë„ (Arousal):** í™”ë©´ í•˜ë‹¨ ìŠ¬ë¼ì´ë”ë¡œ íŒŒë„ì˜ ê±°ì¹ ê¸° ì¡°ì ˆ. (ì™¼ìª½: ì”ì”í•¨/ì´ì™„ â†” ì˜¤ë¥¸ìª½: í­í’ìš°/ê°ì„±)
    *   **í•˜ëŠ˜ (Valence):** í™”ë©´ ìš°ì¸¡ ìŠ¬ë¼ì´ë”ë¡œ ì‹œê°„/ë°ê¸° ì¡°ì ˆ. (ìœ„: í™”ì°½í•œ ë‚®/ê¸ì • â†” ì•„ë˜: ì–´ë‘ìš´ ë°¤/ìš°ìš¸)
*   **Question:** "ì˜¤ëŠ˜ ë‹¹ì‹ ì˜ ë°”ë‹¤ëŠ” ì–´ë–¤ ëª¨ìŠµì¸ê°€ìš”?"
*   **Visual Feedback:** ìŠ¬ë¼ì´ë” ì¡°ì‘ì— ë”°ë¼ ë°°ê²½ ê·¸ë˜í”½(Rive ë˜ëŠ” Shader)ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì‘.
    > **â¤ï¸ Dr. Mind:** "ìì‹ ì˜ ê°ì •ì„ ì–¸ì–´ë¡œ ì •ì˜í•˜ê¸° ì „ì—, ì´ë¯¸ì§€ë¡œ íˆ¬ì‚¬(Projection)í•˜ëŠ” ê³¼ì •ì€ ë°©ì–´ ê¸°ì œë¥¼ ë‚®ì¶”ê³  ì†”ì§í•œ ìƒíƒœë¥¼ ë“œëŸ¬ë‚´ê²Œ ë•ìŠµë‹ˆë‹¤."

### Scene 3: ëª©í‘œ ì„¤ì • (Goal Setting)
*   **Event:** ë‚ ì”¨ê°€ í™•ì •ë˜ë©´, ë¨¼ ë°”ë‹¤ì—ì„œ 'ìœ ë¦¬ë³‘' í•˜ë‚˜ê°€ ë– ë‚´ë ¤ì™€ ì„ ì°©ì¥ì— ê±¸ë¦¼.
*   **Interaction:** ìœ ë¦¬ë³‘ì„ íƒ­ í•˜ì—¬ ê°œë´‰ (ëšœê»‘ ë”°ëŠ” ì‚¬ìš´ë“œ íš¨ê³¼).
*   **Selection:** 3ì¥ì˜ 'ì§€ë„ ì¡°ê°' ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ.
    1.  **ğŸŒ™ ê¹Šì€ ì ì˜ ì„¬:** ìˆ˜ë©´ íš¨ìœ¨ ê°œì„  (Sleep tracking)
    2.  **ğŸ”¥ ì‹ì§€ ì•ŠëŠ” í™”ì‚°:** ë¶„ë…¸ ì¡°ì ˆ (Anger management)
    3.  **ğŸ’ ìƒì–´ë²„ë¦° ë³´ë¬¼:** ê°€ì¹˜ê´€ íƒêµ¬ (Value discovery)
*   **Outcome:** ì„ íƒí•œ ëª©í‘œì— ë”°ë¼ í•´ë‹¹ ëª¨ë“ˆì˜ 'íŠœí† ë¦¬ì–¼ í€˜ìŠ¤íŠ¸' ì‹œì‘.

## 3. ë°ì´í„° ìš”êµ¬ì‚¬í•­ (Data Schema)

> **ğŸ—ï¸ Architect Spec:**
> "ì´ˆê¸° ë°ì´í„°ëŠ” ë¡œì»¬ DB(Isar)ì— ìš°ì„  ì €ì¥ë˜ë©°, ì¶”í›„ ë™ê¸°í™” ì‹œ JSON í˜•íƒœë¡œ ë³€í™˜ë©ë‹ˆë‹¤."

```json
{
  "user_profile": {
    "nickname": "String (Input from Scene 1)",
    "created_at": "Timestamp"
  },
  "initial_assessment": {
    "visual_metaphor_state": {
      "wave_height": "Float (0.0 ~ 1.0) // Arousal",
      "sky_brightness": "Float (0.0 ~ 1.0) // Valence"
    },
    "sam_score_derived": {
      "arousal_score": "Integer (1-9 mapped from wave_height)",
      "valence_score": "Integer (1-9 mapped from sky_brightness)"
    }
  },
  "quest_state": {
    "active_module_id": "String (Selected Card ID: 'sleep' | 'anger' | 'value')",
    "tutorial_completed": true
  }
}
```

## 4. êµ¬í˜„ ê°€ì´ë“œ (Technical Notes)

> **ğŸ—ï¸ Architect Spec:**
> "Flutter í™˜ê²½ì— ë§ì¶° ìµœì í™”ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ íŒ¨í„´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤."

### 4.1 Animation & Visuals
*   **Library:** `flutter_animate` ë˜ëŠ” `rive` ì‚¬ìš©.
    *   ì•ˆê°œ(Fog) íš¨ê³¼: `ShaderMask`ì™€ `AnimationController`ë¥¼ í™œìš©í•œ ì»¤ìŠ¤í…€ ì‰ì´ë” ë˜ëŠ” Rive ì• ë‹ˆë©”ì´ì…˜.
    *   íˆ¬ëª…ë„/ìœ„ì¹˜ ì œì–´: `AnimatedOpacity`, `AnimatedPositioned` ë“± ì•”ì‹œì  ì• ë‹ˆë©”ì´ì…˜ ìœ„ì ¯ í™œìš© ê¶Œì¥.

### 4.2 Gestures
*   **Fishing Action:** `GestureDetector`ì˜ `onVerticalDragUpdate` ë° `onVerticalDragEnd`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚šì‹¯ëŒ€ íˆ¬ì²™ ë™ì‘ êµ¬í˜„.
    *   Pull-to-refreshì™€ ìœ ì‚¬í•œ ë¬¼ë¦¬ ê°ê°(Elastic effect)ì„ ìœ„í•´ `PhysicsSimulation` ê³ ë ¤.

### 4.3 Haptics
*   **Feedback:** `HapticFeedback` (flutter/services) ì‚¬ìš©.
    *   ë‚šì‹œ ì„±ê³µ ì‹œ: `HapticFeedback.heavyImpact()`
    *   ëª…ì°° ë‹¦ì„ ë•Œ: `HapticFeedback.selectionClick()` (ì—°ì†ì  í”¼ë“œë°±)

### 4.4 Asset Management
*   **Caching:** `cached_network_image` (ì›ê²© ì´ë¯¸ì§€ì¼ ê²½ìš°) ë˜ëŠ” `precacheImage` (ë¡œì»¬ ì—ì…‹)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸° ì§„ì… ì‹œ ë¡œë”© ë”œë ˆì´ ë°©ì§€.
*   **Background:** ê³ í•´ìƒë„ ë°°ê²½ì€ ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ ìœ„í•´ ì ì ˆí•œ ì••ì¶• í¬ë§·(WebP ë“±) ì‚¬ìš©.
