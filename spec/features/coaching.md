# 코칭 시스템 기능 명세서

## 🎯 기능 개요
사용자의 감정 상태와 수면 패턴을 분석하여 개인화된 질문과 가이드를 제공하는 AI 기반 코칭 시스템

## 📋 주요 기능

### 🤖 딥 코칭 시스템
**목적**: 사용자의 감정 상태를 깊이 있게 탐구하고 개선 방안 제시

**핵심 구성요소**:
- **Rule Engine**: 감정 데이터 기반 개인화된 질문 생성
- **Question Bank**: 다양한 상황별 질문 라이브러리
- **Coach Repository**: 코칭 세션 데이터 관리

**작동 방식**:
1. 사용자의 최근 감정 기록 분석
2. Rule Engine을 통한 적절한 질문 선별
3. 대화형 코칭 세션 진행
4. 개인화된 가이드 및 액션 아이템 제안

### 💡 퀵 코칭 카드
**목적**: 일상에서 빠르게 적용 가능한 실용적 팁 제공

**카드 유형**:
- **감정 조절 팁**: 스트레스, 불안감 완화 방법
- **수면 개선 가이드**: 더 나은 수면을 위한 실용적 조언
- **행복 증진 액션**: 일상 속 작은 행복 찾기 방법
- **마인드풀니스**: 현재 순간 집중 연습

**표시 방식**:
- 홈 화면에 개인화된 카드 추천
- 스와이프로 다른 카드 탐색
- 즐겨찾기 기능으로 유용한 팁 저장

### 🎯 7일 챌린지 시스템  
**목적**: 지속적인 습관 형성을 위한 구조화된 프로그램

**챌린지 종류**:

**수면 개선 챌린지**:
- 빠르게 잠들기 (잠드는 시간 10분 단축)
- 깊은 수면 (밤중 깨는 횟수 절반으로)
- 상쾌한 아침 (기상 후 피로감 30% 감소)

**행복 증진 챌린지**:
- 매일 감사 3가지 기록
- 소소한 행복 순간 포착
- 긍정적 인맥 관리

**진행 방식**:
- 일일 체크인 알림
- 진행률 시각적 추적
- 완주시 성취 배지 제공
- 개인화된 격려 메시지

## 🏗️ 기술적 구현사항

### 규칙 엔진 (Rule Engine)
```dart
class RuleEngine {
  List<CoachingRule> rules;
  
  List<Question> generateQuestions(EmotionRecord record) {
    // 감정 기록을 분석하여 적절한 질문들 생성
    // 우선순위 기반 정렬 후 반환
  }
  
  bool shouldTriggerCoaching(List<EmotionRecord> recentRecords) {
    // 최근 기록들을 분석하여 코칭 필요성 판단
  }
}
```

### 데이터 모델
```dart
class CoachingSession {
  String id;
  DateTime startTime;
  List<QuestionAnswer> conversation;
  List<ActionItem> recommendations;
  CoachingType type; // DEEP_COACHING, QUICK_TIP
  CompletionStatus status;
}

class QuestionAnswer {
  Question question;
  String userAnswer;
  DateTime answeredAt;
}

class ActionItem {
  String title;
  String description;
  Priority priority;
  bool isCompleted;
}
```

### 질문 은행 (Question Bank)
**카테고리별 질문 분류**:
- **감정 탐구**: "지금 이 감정의 근본적인 원인은 무엇일까요?"
- **상황 분석**: "이 상황에서 가장 중요한 것은 무엇인가요?"
- **행동 변화**: "내일부터 다르게 할 수 있는 한 가지는?"
- **관점 전환**: "이 경험에서 배울 점이 있다면?"

**개인화 로직**:
- 사용자 응답 패턴 학습
- 효과적이었던 질문 유형 우선 제공
- 반복을 피하기 위한 질문 로테이션

## 🎨 UI/UX 가이드라인

### 코칭 세션 화면
**대화형 인터페이스**:
- 메신저 스타일의 말풍선 UI
- 질문은 시스템 메시지 스타일
- 사용자 답변은 채팅 말풍선 스타일
- 타이핑 애니메이션으로 자연스러운 대화감 연출

**진행 상태 표시**:
- 상단에 진행률 바 (5개 질문 중 3번째 등)
- 예상 소요 시간 안내
- 중단/재개 기능

### 퀵 코칭 카드 디자인
**카드 구성 요소**:
- **아이콘**: 카테고리별 구분 아이콘
- **제목**: 간결한 액션 제목
- **설명**: 1-2줄의 구체적 설명
- **CTA**: "지금 시도하기" 버튼

**시각적 특징**:
- 카테고리별 색상 코딩
- 부드러운 그림자와 라운드 코너
- 스와이프 제스처 가이드 애니메이션

### 챌린지 진행 화면
**진행률 시각화**:
- 원형 프로그레스 바 (완성률 %)
- 일별 체크박스 또는 스트릭 표시
- 성취 마일스톤 표시

**동기부여 요소**:
- 매일 다른 격려 메시지
- 진행률 기반 개인화된 응원
- 완주 예상일 카운트다운

## 🧠 개인화 알고리즘

### 질문 선별 로직
1. **최근 감정 패턴 분석**: 지난 7일간의 감정 강도 및 빈도
2. **응답 이력 고려**: 이전에 도움이 되었던 질문 유형
3. **시간대별 조건**: 아침/점심/저녁 시간대별 최적 질문
4. **개인 성향 반영**: 내향적/외향적 성향에 따른 질문 스타일

### 추천 시스템
**콘텐츠 추천 요소**:
- 현재 감정 상태
- 계절/날씨 정보
- 요일별 패턴
- 개인 관심사 태그

**학습 메커니즘**:
- 사용자 피드백 수집 (도움됨/안됨)
- 실제 액션 아이템 실행 여부 추적
- A/B 테스트를 통한 지속적 개선

## 📊 효과 측정

### KPI 지표
- **참여율**: 코칭 세션 시작률 및 완료율
- **만족도**: 세션 후 만족도 평가
- **행동 변화**: 제안된 액션 아이템 실행률
- **지속성**: 7일 챌린지 완주율

### 개인별 성과 추적
- 감정 안정성 개선도
- 수면 질 향상 정도
- 전반적 웰빙 지수 변화

## 🚀 향후 확장 기능
- **음성 기반 코칭**: 음성 인식을 통한 자연스러운 대화
- **감정 AI 분석**: 텍스트/음성에서 감정 상태 자동 인식
- **커뮤니티 기능**: 비슷한 고민을 가진 사용자들과의 익명 소통
- **전문가 연결**: 필요시 전문 상담사와의 연결 서비스
- **웨어러블 연동**: 생체 신호 기반 실시간 코칭