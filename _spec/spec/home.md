# 홈 화면 명세서

## 🎯 기능 개요
사용자가 앱을 열었을 때 가장 먼저 보는 메인 화면으로, 최근 기록을 확인하고 새로운 행복 기록을 빠르게 작성할 수 있는 진입점 역할을 수행

## 📋 화면 구조

### 전체 레이아웃
**구조**: 스크롤 가능한 세로 레이아웃 (SingleChildScrollView)
```
Stack {
  Column (스크롤 가능) {
    [최근 작성한 기록 패널]
    [구분선]
    [명언 패널]
    [여백]
  }
  [드래그 가능한 FAB 버튼] (하단 고정)
  [점수 슬라이더] (드래그 중 오버레이)
}
```

### 화면 구성 요소

#### 1. 최근 작성한 기록 패널 (RecentRecordsSection)
**목적**: 사용자가 최근에 작성한 행복 기록을 빠르게 확인할 수 있도록 제공

**표시 내용**:
- 날짜 (YYYY.MM.DD 형식)
- 기록 내용 (최대 3줄, 말줄임표 처리)
- 태그 (있는 경우, #태그 형식으로 표시)

**UI/UX 요구사항**:
- **레이아웃**: 화면 상단에 배치, 가로 전체 너비 사용
- **표시 방식**: PageView를 사용한 좌우 스와이프 네비게이션
- **카드 디자인**:
  - 각 카드는 중앙 정렬
  - 현재 선택된 카드는 확대 표시 (scale 효과)
  - 선택된 카드에 그림자 효과 적용
  - 카드 너비: 화면 너비의 70%
  - 카드 높이: 180px
- **페이지 인디케이터**: 하단에 점(dot) 형태로 표시
  - 활성 페이지: 길이 16px, 프라이머리 컬러
  - 비활성 페이지: 길이 8px, 회색
- **기록 개수**: 최대 5개까지 표시
- **빈 상태 처리**:
  - 기록이 없을 경우:
    - 아이콘: 😞 (sentiment_dissatisfied)
    - 안내 문구: "아직 행복 기록이 없어요!\n오늘의 행복을 빠르게 기록해보세요 :)"
    - 높이: 160px, 중앙 정렬

**인터랙션**:
- 좌우 스와이프로 이전/다음 기록 탐색
- 새 기록 저장 후 자동으로 첫 번째 페이지로 스크롤 (애니메이션 400ms)

**기술적 구현**:
- PageController 사용 (viewportFraction: 0.85)
- AnimatedContainer로 카드 크기 및 그림자 애니메이션
- ScrollConfiguration으로 커스텀 스크롤 동작 설정

#### 2. 명언 패널 (QuoteOfTheDay)
**목적**: 사용자에게 일일 영감을 주는 명언을 제공하여 긍정적인 마인드셋 유도

**표시 내용**:
- 명언 텍스트 (따옴표로 감싸서 표시)
- 작가 이름 (하이픈으로 감싸서 표시)

**UI/UX 요구사항**:
- **레이아웃**: 최근 기록 패널과 구분선으로 분리
- **스타일**:
  - 명언: 이탤릭체, 15px, 중앙 정렬
  - 작가: 볼드, 14px, 중앙 정렬
- **간격**: 상하 24px 여백
- **구분선**: 좌우 32px 인덴트

**데이터**:
- QuoteService를 통해 일일 명언 제공
- 날짜 기반으로 고정된 명언 표시 (같은 날에는 동일한 명언)

#### 3. 새 기록 작성 버튼 (DraggableFAB)
**목적**: 사용자가 빠르게 새로운 행복 기록을 작성할 수 있는 주요 액션 버튼

**상태 관리**:
- **Idle 상태**: 기본 웃는 얼굴 이모지(😊) 버튼 표시
- **Dragging 상태**: 버튼 투명도 0으로 숨김, 점수 슬라이더 표시

**UI/UX 요구사항**:
- **위치**: 화면 하단 중앙 고정
- **크기**: 80x80px 터치 영역 (실제 버튼은 72px 원형)
- **디자인**:
  - 원형 버튼 (CircleAvatar)
  - 배경색: Amber (프라이머리 컬러)
  - 이모지 크기: 36px
  - 선택된 점수에 따라 이모지 변경:
    - 1점: 😢
    - 2점: 😕
    - 3점: 😐
    - 4점: 🙂
    - 5점: 😄
- **애니메이션**:
  - 이모지 변경 시 ScaleTransition 애니메이션 (200ms)
  - 드래그 시작 시 버튼 페이드 아웃

**인터랙션**:
- **터치 다운**: 드래그 시작 감지 (임계값: 10px)
- **드래그**: 수평 방향으로 드래그하여 점수 선택
- **드래그 종료**: 선택한 점수로 작성 페이지 이동

**제스처 처리**:
- PanGestureRecognizer 사용
- 드래그 시작 임계값: 10px (의도하지 않은 터치 방지)
- 수평 방향 드래그만 인식

#### 4. 점수 슬라이더 (ScoreSlider)
**목적**: 드래그 중 사용자가 선택한 점수를 시각적으로 표시

**UI/UX 요구사항**:
- **위치**: FAB와 동일한 위치에 오버레이
- **크기**: 너비 220px, 높이 72px
- **디자인**:
  - 5개의 원형 버튼 (1~5점)
  - 선택된 점수: 48x48px, Amber 배경, 흰색 숫자, 그림자 효과
  - 비선택 점수: 32x32px, 흰색 배경, Amber 숫자
  - 각 점수 간 동일한 간격 배치
- **애니메이션**:
  - 점수 변경 시 AnimatedContainer로 크기 및 색상 전환 (100ms)
  - 선택된 점수에 그림자 효과 (blurRadius: 10px)

**인터랙션**:
- 드래그 중에만 표시
- 드래그 위치에 따라 점수 자동 선택
- 손을 떼면 선택된 점수로 작성 페이지 이동

## 🏗️ 기술적 구현사항

### 상태 관리
- **HomeController**: 최근 기록 로드 및 상태 관리
- **HomeState**: 최근 기록 리스트, 로딩 상태 관리
- **HomeIntent**: LoadRecentRecords 등 액션 정의

### 데이터 흐름
1. 화면 진입 시 `LoadRecentRecords` 인텐트 발생
2. HomeController가 UseCase를 통해 최근 기록 조회
3. 상태 업데이트 후 UI에 반영

### 주요 컴포넌트
- `HappyHomePage`: 메인 화면 위젯
- `HomeContent`: 스크롤 가능한 콘텐츠 영역
- `RecentRecordsSection`: 최근 기록 패널
- `QuoteOfTheDay`: 명언 패널
- `DraggableFAB`: 드래그 가능한 FAB 버튼
- `ScoreSlider`: 점수 선택 슬라이더
- `DragGestureHandler`: 드래그 제스처 처리 로직
- `AnimatedScoreButton`: 점수에 따른 이모지 표시 버튼

### 네비게이션
- FAB 드래그 종료 시: `WritePage`로 이동 (선택된 점수 전달)
- 기록 카드 탭 시: (향후 구현) 상세 보기 화면 이동

## 🎨 UI/UX 가이드라인

### 색상
- **프라이머리**: Amber (#FFE135)
- **배경**: 흰색
- **텍스트**: 기본 텍스트 컬러
- **비활성 요소**: 회색 (Colors.grey[300])

### 간격 및 패딩
- 화면 좌우 패딩: 16px
- 섹션 간 간격: 24px
- FAB 하단 여백: 32px + SafeArea bottom padding
- 명언 패널 좌우 패딩: 32px

### 애니메이션
- 카드 전환: 300ms, easeOut
- 페이지 인디케이터: 250ms
- 이모지 변경: 200ms, ScaleTransition
- 점수 슬라이더: 100ms
- 페이지 스크롤: 400ms, easeOut

### 접근성
- 최소 터치 영역: 44px (FAB는 80px로 확보)
- 스크린 리더 지원: 적절한 레이블링
- 색상 대비: WCAG AA 기준 준수

## 📱 반응형 디자인

### 화면 크기 대응
- 카드 너비: 화면 너비의 70% (반응형)
- FAB 위치: 하단 중앙 고정 (모든 화면 크기)
- SafeArea 고려: 하단 노치/홈 인디케이터 영역 피함

### 방향 전환
- 세로 모드: 현재 레이아웃 유지
- 가로 모드: (향후 구현) 레이아웃 조정

## ⚡ 성능 요구사항
- 화면 로딩 시간: 1초 이내
- 최근 기록 조회: 500ms 이내
- 애니메이션 프레임: 60fps 유지
- 메모리 사용: 최대 50MB

## 🔄 상태 처리

### 로딩 상태
- 초기 로딩: (향후 구현) 로딩 인디케이터 표시
- 데이터 없음: 빈 상태 UI 표시

### 에러 처리
- 네트워크 오류: (향후 구현) 에러 메시지 표시
- 데이터 조회 실패: 빈 상태로 처리

## 🚀 향후 확장 기능
- 기록 카드 탭 시 상세 보기
- 기록 편집/삭제 기능
- 명언 공유 기능
- 기록 검색 기능
- 필터링 기능 (날짜, 태그별)
- 통계 요약 카드 추가
- 챌린지 진행 상황 표시
- 개인화된 추천 콘텐츠

